# 视频标注系统使用说明

## 功能特性

✅ **CSV文件维护** - 自动管理视频路径和标注状态
✅ **自动视频切换** - 完成标注后自动加载下一个未标注视频
✅ **自动播放** - 视频加载时自动开始播放
✅ **回车提交** - 支持回车键快速提交标注内容
✅ **智能提醒** - 输入时自动检测相似的已有标注内容
✅ **无滚动布局** - 视频和标注区域合理分布，单页面完成操作
✅ **进度跟踪** - 实时显示标注进度和统计信息

## 快速启动

### 方法1：使用启动脚本
```bash
./start_annotation.sh
```

### 方法2：手动启动
```bash
# 安装依赖
pip install flask pandas

# 启动服务器
python3 video_annotation_server.py
```

## 访问地址
启动后访问：http://localhost:5000

## 使用流程

1. **自动初始化** - 系统启动时会自动扫描 `videos/` 和 `Dataset/` 目录下的视频文件
2. **开始标注** - 页面自动加载第一个待标注视频
3. **视频播放** - 视频自动开始播放，您可以观察人人交互动作
4. **输入标注** - 在右侧文本框输入2-3个单词描述交互动作
5. **智能提醒** - 系统会自动提示相似的已有标注内容
6. **提交标注** - 按回车键或点击提交按钮
7. **自动切换** - 提交后系统自动加载下一个视频

## 标注要求

- **内容长度**：2-3个单词
- **描述重点**：人与人之间的交互动作
- **示例标注**：
  - "握手问候"
  - "拥抱告别"
  - "推拉互动"
  - "击掌庆祝"
  - "搀扶行走"

## 数据存储

标注数据保存在 `annotation_data.csv` 文件中，包含以下字段：
- `video_path`: 视频文件路径
- `annotation`: 标注内容
- `status`: 标注状态 (pending/completed)
- `annotated_time`: 标注时间

## 界面布局

```
┌─────────────────────────┬──────────────────┐
│                         │   标注区域       │
│      视频播放区域        │   ┌──────────┐   │
│                         │   │进度条    │   │
│                         │   │文本输入  │   │
│                         │   │智能提醒  │   │
│────────────────────     │   │提交按钮  │   │
│  视频路径 │ 统计信息     │   └──────────┘   │
└─────────────────────────┴──────────────────┘
```

## 快捷键

- **回车键**: 提交当前标注
- **Tab键**: 在输入框和按钮间切换焦点

## 高级功能

### 添加新视频
可以通过API接口添加新的视频文件到标注列表：
```bash
curl -X POST http://localhost:5000/api/add_video \
  -H "Content-Type: application/json" \
  -d '{"video_path": "/path/to/video.mp4"}'
```

### 批量添加视频
将视频文件放入 `videos/` 或 `Dataset/` 目录，重启服务器即可自动添加。

## 故障排除

### 视频无法播放
- 检查浏览器是否支持视频格式
- 确认视频文件路径正确
- 检查文件权限

### 无法提交标注
- 确认输入框有内容
- 检查网络连接
- 查看浏览器控制台错误信息

### CSV文件问题
- 检查文件权限
- 确认pandas正确安装
- 查看服务器日志

## 技术架构

- **后端**: Flask + pandas
- **前端**: HTML5 + CSS3 + Vanilla JavaScript
- **数据存储**: CSV文件
- **视频支持**: HTML5 Video (mp4, avi, mov, mkv, webm)

## 系统要求

- Python 3.6+
- 现代浏览器（Chrome、Firefox、Safari、Edge）
- 支持HTML5视频播放

## 开发扩展

系统基于模块化设计，可以轻松扩展：
- 修改 `video_annotation_server.py` 添加新的API接口
- 修改 `templates/annotation.html` 自定义界面
- 修改CSV字段结构支持更多元数据